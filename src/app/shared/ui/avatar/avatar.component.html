<div class="relative inline-block">
    <!-- Avatar with image -->
    <div *ngIf="src && !imageError" [ngClass]="avatarClasses"
        [style.overflow]="'hidden'">
        <img [src]="src" [alt]="alt || name" (error)="onImageError()"
            class="w-full h-full object-cover">
    </div>

    <!-- Avatar with initials -->
    <div *ngIf="(!src || imageError) && name"
        [ngClass]="[avatarClasses, avatarBgColor]"
        class="text-white">
        {{ initials }}
    </div>

    <!-- Fallback avatar -->
    <div *ngIf="(!src || imageError) && !name"
        [ngClass]="[avatarClasses, 'bg-gray-200']">
        <svg class="w-1/2 h-1/2 text-gray-400" fill="currentColor"
            viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
                d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                clip-rule="evenodd"></path>
        </svg>
    </div>

    <!-- Status indicator -->
    <span *ngIf="status"
        [ngClass]="[statusClasses, positionClasses]">
    </span>

    <!-- Badge indicator -->
    <span *ngIf="badge"
        class="absolute top-0 right-0 transform -translate-y-1/3 translate-x-1/3 flex items-center justify-center bg-red-500 text-xs text-white rounded-full min-w-[1.25rem] h-5 px-1 font-medium">
        {{ badge }}
    </span>
</div>